# Mock

## Ссылки

1. Начнем работу с Mock в Python (2018);

[Начнем работу с Mock в Python](https://nuancesprog.ru/p/1161/)

1. Модуль Mock: макеты-пустышки в тестировании (2012).

[Модуль Mock: макеты-пустышки в тестировании](https://habr.com/ru/post/141209/)

## Что такое Mock?

***Mock*** - объект, создающий пустой тест для определенной части программы. Вместо вызова обычной проверки, можно вызвать `mock` и смотреть, как проходит тест какая-то часть программы.

## Преимущества

1. Высокая скорость, например, для ресурсоемких функций;
2. Избежание нежелательных эффектов, например, можно не вызывать каждый раз
внешний API при тестировании.

## Примеры использования Mock в Python

Процесс  сложения существенно замедлит наши тесты. Это явно не самая лучшая идея - вызывать `sum` каждый раз, когда мы проводим тесты. Это ситуация, когда мы можем использовать `mock`, чтобы ускорить тесты и избежать нежелательных последствий.

Мы импортируем декоратор patch из `unittest.mock`. Он заменяет фактическую функцию `sum` ложной функцией, которая ведет себя именно так, как мы хотим. В этом случае наша фиктивная функция всегда возвращает 9. В течение всего теста функция `sum` заменяется на `mock`.

`Mock` позволяет обеспечить так называемую поддельную реализацию той части вашей программы, которую вы тестируете.

```python
import time
from unittest import TestCase
from unittest.mock import patch

class Calculator:
    def sum(self, a, b):
        time.sleep(10)  # long running process
        return a + b

class TestCalculator(TestCase):
    @patch('main.Calculator.sum', return_value=9)
    def test_sum(self, sum):
        self.assertEqual(sum(2, 3), 9)
```