# REST

## Ссылки

1. ****REST, что же ты такое? Понятное введение в технологию для ИТ-аналитиков (2021)****

[REST, что же ты такое? Понятное введение в технологию для ИТ-аналитиков](https://habr.com/ru/post/590679/)

## Начальная терминология

- Информацию можно представить в каком лиюо виде. Причем, одну и ту же
информацию можно представить совершенно в разном виде. Такой способ
представления будем называть ***форматом представления данных***. Например,
обычный текст, XML, JSON, Binary.
- Информацию можно как то передать, в любом ее виде. Способ передачи данных
назовем ***протоколом передачи данных*** - набор соглашений, которые определяют
процесс обмена данными между разными программами.
- Для передачи инфрмации так же необходимо средство доставки. Назовем это
***транспорт*** - подмножество сетевых протоколов, с помощью которых мо можем
передавать данные по сети. Например, HTTP, AMQP, FTP.

## Что такое REST?

***Representational State Transfer*** - архитектурный стиль взаимодействия компонентов
распределенного приложения в сети. Существование REST - достижение следующих
свойств в проектируемоей системе:

- Производительность;
- Маштабируемость;
- Гибкость к изменениям;
- Отказуустойчивость;
- Простота поддержки.

## Принципы REST

У REST есть 6 принципов, ограничений, которые помогают добится необходимых требований.

### 1. Клиент-серверная архитектура

Клиенская и серверная сторона должна быть разделена. Общение между ними должно происходить через API. Это дает определенную маштабируемость. При этом, изменение сервера может не задевать собой изменение клиента, как и наоборот (если следовть REST). 

При этом, есть и минусы - без сервера клиенты мало что смогут сделать.

![Схема взаимодействия клиент-серверной архитектуры](REST%206a3f8/d9fd573051df0ba2347498a595618296.png)

Схема взаимодействия клиент-серверной архитектуры

### 2. Stateless

Сервер не должен хранить у себя информацию о сессии с клиентом. При общении с сервером нужно передавать всю информацию для нужного запроса, не оглядываясь на контекст.

![Пример реализации принципа Stateless. Запрос погоды на 20.06 в Москве](REST%206a3f8/fe7303c6b9919e620e53ac7990790bec.png)

Пример реализации принципа Stateless. Запрос погоды на 20.06 в Москве

Обратная сторона - ***Statefull***, примером которого является FTP сервер.

![Пример реализации принципа Stateful](REST%206a3f8/327cc440587ee77a5a81d091fe8faf90.png)

Пример реализации принципа Stateful

Плюсы такого похода:

1. Маштабируемость - каждый запрос содержет в себе весь контекст, что позволяет
делать копии серверов, поведение которых будет индентично;
2. Простота поддержки, например, с точки зрения логов;
3. Возможно использование кэширование;
4. Уменьшение обработки запроса (не нужно вспомниать контекст).

Минусы такого подхода:

1. Усложнение работы клиета, если информацию о контексте нужно все же учитывать;
2. Увеличение нагрузки на сеть за счет передачи всей инфрмации для запроса.

### 3. Кэширование

Этот принцип говорит о том, что каждый сервер должен иметь пометку, что его можно
кешировать. Полезно, когда у сервера часто спрашивают одну и ту же информацию.

Плюсы кеширования:

1. Уменьшение количества сетевых взаимодействий;
2. Уменьшение нагружки на системы (не грузим дополнительными запросами).

![Пример реализации архитектуры с использованием кэширования](REST%206a3f8/e386ff43feb7ca70615f1eb2111abe4f.png)

Пример реализации архитектуры с использованием кэширования

### 4. Единобразие интерфейса

***Hypermedia as the Engine of Application State ([HATEOAS](https://ru.wikipedia.org/wiki/HATEOAS))*** - одно из ограничений REST, согласнокоторому сервер возвращает не только ресурс, но и связи с другими ресурсами и действиями. К условному объекту мы получаем вязные с ним важные способы запроса.

Клиент становится очень гибким в плане изменений на сервере.

Но при этом может усложнится логика самого клиента.

### 5. Layered system

Принцип слоистой структуры предпологает наличие посредников между клиентом и сервером, причем участники не должны знать о структуре сети дальше своего соседа. 

Позволяет изменять общую архитектуру без каких- либо изменений со стороны клиента и сервера.

Минусы:

1. Увеличение нагрузки на сеть (больше участников - больше вызовов);
2. Увеличение времени ответа.

![Модель слоистой архитектуры](REST%206a3f8/d88b7af4e68e3dfc8f40d6edfd03f6cf.png)

Модель слоистой архитектуры

### 6. code on demand

Код по требованию. Идея передачи некоторого исполняемого кода от сервера к клиенту, который этот код будет в дальнейшем выполнять.

Добавляет к гибкости со стороны клиента.

Типичный пример - JavaScript.